import{r as u,e as x,k as l,c as i,a as e,y as v,g as y,f as b,h as w,v as h,u as a,i as k,t as _,d as C,o as n,n as L}from"./DF66RuPJ.js";import{u as p}from"./CYNNm3xl.js";const z={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},V={class:"max-w-md w-full space-y-8"},B=["disabled"],M={key:0,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4"},A={class:"flex"},N={class:"ml-3"},T={class:"text-sm text-red-700 dark:text-red-400"},j=["disabled"],I={key:0},S={key:1,class:"flex items-center"},H={__name:"login",setup(D){const{login:m,isLoading:d}=p(),s=u(""),o=u(""),{user:c}=p();x(async()=>{c.value&&(c.value.role==="admin"?await l("/admin",{replace:!0}):await l("/wheel",{replace:!0}))});const f=async()=>{if(o.value="",!s.value){o.value="Por favor ingresa tu correo electrónico";return}try{const t=await m(s.value);t.success?(console.log("Login successful, user role:",t.user.role),await L(),t.user.role==="admin"?await l("/admin",{replace:!0,external:!1}):await l("/wheel",{replace:!0,external:!1})):o.value=t.error}catch(t){console.error("Login error:",t),o.value="Error durante el login"}};return(t,r)=>(n(),i("div",z,[e("div",V,[r[4]||(r[4]=v('<div><div class="mx-auto h-12 w-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" clip-rule="evenodd"></path></svg></div><h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white"> Accede a BonoCopas </h2><p class="mt-2 text-center text-sm text-gray-600 dark:text-gray-400"> Ingresa tu correo electrónico para comenzar a girar la ruleta </p></div>',1)),e("form",{class:"mt-8 space-y-6",onSubmit:y(f,["prevent"])},[e("div",null,[r[1]||(r[1]=e("label",{for:"email",class:"sr-only"},"Correo electrónico",-1)),w(e("input",{id:"email","onUpdate:modelValue":r[0]||(r[0]=g=>k(s)?s.value=g:null),name:"email",type:"email",autocomplete:"email",required:"",class:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",disabled:a(d)},null,8,B),[[h,a(s)]])]),a(o)?(n(),i("div",M,[e("div",A,[r[2]||(r[2]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",N,[e("p",T,_(a(o)),1)])])])):b("",!0),e("div",null,[e("button",{type:"submit",disabled:a(d)||!a(s),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[a(d)?(n(),i("span",S,[...r[3]||(r[3]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Ingresando... ",-1)])])):(n(),i("span",I,"Ingresar"))],8,j)])],32),r[5]||(r[5]=e("div",{class:"text-center"},[e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Al ingresar, aceptas nuestros términos y condiciones ")],-1))])]))}};export{H as default};
