import{x as V,r as c,A as k,e as j,c as d,a as e,f as w,d as h,u as r,t as a,F as B,E as S,g as N,h as m,v as b,J as $,o as l,I as q,C as U}from"./DF66RuPJ.js";const T={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},D={key:0,class:"flex justify-center items-center py-12"},L={key:1,class:"space-y-6"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},H={class:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg"},I={class:"p-5"},G={class:"flex items-center"},J={class:"ml-5 w-0 flex-1"},K={class:"text-lg font-medium text-gray-900 dark:text-white"},O={class:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg"},Q={class:"p-5"},R={class:"flex items-center"},W={class:"ml-5 w-0 flex-1"},X={class:"text-lg font-medium text-gray-900 dark:text-white"},Y={class:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg"},Z={class:"p-5"},ee={class:"flex items-center"},te={class:"ml-5 w-0 flex-1"},se={class:"text-lg font-medium text-gray-900 dark:text-white"},re={class:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md"},oe={class:"px-4 py-5 sm:p-6"},ie={class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},de={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},le={class:"px-6 py-4 whitespace-nowrap"},ne={class:"text-sm font-medium text-gray-900 dark:text-white"},ce={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ue={class:"px-6 py-4 whitespace-nowrap"},me={class:"flex items-center"},xe={class:"text-sm text-gray-900 dark:text-white"},ge={class:"ml-2 w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},be={class:"px-6 py-4 whitespace-nowrap"},ye={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},fe=["onClick"],ve=["onClick"],ke={key:2,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},we={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},he={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},_e={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4"},Ce={class:"grid grid-cols-2 gap-4"},Ae={class:"flex items-center"},Pe={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},Me=["disabled"],ze={key:0},Ee={key:1,class:"flex items-center"},Be={__name:"prizes",setup(Ve){const{$api:x}=V(),u=c([]),y=c(!0),g=c(!1),n=c(!1),p=c(!1),o=c({name:"",description:"",probability:0,stock:0,isActive:!0}),_=k(()=>u.value.filter(i=>i.isActive).length),C=k(()=>u.value.reduce((i,t)=>i+t.stock,0)),f=async()=>{try{y.value=!0;const i=await x.get("/admin/prizes",{withCredentials:!0});u.value=i.data.prizes}catch(i){console.error("Error loading prizes:",i)}finally{y.value=!1}},A=()=>{n.value=!1,o.value={name:"",description:"",probability:0,stock:0,isActive:!0},g.value=!0},P=i=>{n.value=!0,o.value={...i},g.value=!0},v=()=>{g.value=!1,o.value={name:"",description:"",probability:0,stock:0,isActive:!0}},M=async()=>{try{p.value=!0,n.value?await x.put(`/admin/prizes/${o.value._id}`,o.value,{withCredentials:!0}):await x.post("/admin/prizes",o.value,{withCredentials:!0}),await f(),v()}catch(i){console.error("Error saving prize:",i),alert(i.response?.data?.message||"Error al guardar el premio")}finally{p.value=!1}},z=async i=>{if(confirm(`¿Estás seguro de que quieres eliminar el premio "${i.name}"?`))try{await x.delete(`/admin/prizes/${i._id}`,{withCredentials:!0}),await f()}catch(t){console.error("Error deleting prize:",t),alert(t.response?.data?.message||"Error al eliminar el premio")}};return j(()=>{f()}),(i,t)=>(l(),d("div",T,[e("div",{class:"flex items-center justify-between mb-8"},[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," 🏆 Gestión de Premios "),e("p",{class:"mt-2 text-gray-600 dark:text-gray-400"}," Administra los premios de la ruleta ")],-1)),e("button",{onClick:A,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors duration-200"},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),h(" Nuevo Premio ",-1)])])]),r(y)?(l(),d("div",D,[...t[7]||(t[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(l(),d("div",L,[e("div",F,[e("div",H,[e("div",I,[e("div",G,[t[9]||(t[9]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",J,[e("dl",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"}," Total Premios ",-1)),e("dd",K,a(r(u).length),1)])])])])]),e("div",O,[e("div",Q,[e("div",R,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",W,[e("dl",null,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"}," Premios Activos ",-1)),e("dd",X,a(r(_)),1)])])])])]),e("div",Y,[e("div",Z,[e("div",ee,[t[13]||(t[13]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),e("div",te,[e("dl",null,[t[12]||(t[12]=e("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"}," Stock Total ",-1)),e("dd",se,a(r(C)),1)])])])])])]),e("div",re,[e("div",oe,[e("div",ie,[e("table",ae,[t[14]||(t[14]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Premio "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Probabilidad "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Stock "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Estado "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",de,[(l(!0),d(B,null,S(r(u),s=>(l(),d("tr",{key:s._id},[e("td",le,[e("div",null,[e("div",ne,a(s.name),1),s.description?(l(),d("div",ce,a(s.description),1)):w("",!0)])]),e("td",ue,[e("div",me,[e("div",xe,a(s.probability)+"%",1),e("div",ge,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:q({width:`${Math.min(s.probability,100)}%`})},null,4)])])]),e("td",pe,a(s.stock),1),e("td",be,[e("span",{class:U(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"])},a(s.isActive?"Activo":"Inactivo"),3)]),e("td",ye,[e("button",{onClick:E=>P(s),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-200 mr-4"}," Editar ",8,fe),e("button",{onClick:E=>z(s),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-200"}," Eliminar ",8,ve)])]))),128))])])])])])])),r(g)?(l(),d("div",ke,[e("div",we,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:v}),e("div",he,[e("div",null,[e("h3",_e,a(r(n)?"Editar Premio":"Crear Nuevo Premio"),1),e("form",{onSubmit:N(M,["prevent"]),class:"space-y-4"},[e("div",null,[t[15]||(t[15]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Nombre del Premio ",-1)),m(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>r(o).name=s),type:"text",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[b,r(o).name]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Descripción (opcional) ",-1)),m(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=s=>r(o).description=s),rows:"3",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[b,r(o).description]])]),e("div",Ce,[e("div",null,[t[17]||(t[17]=e("label",{for:"probability",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Probabilidad (%) ",-1)),m(e("input",{id:"probability","onUpdate:modelValue":t[2]||(t[2]=s=>r(o).probability=s),type:"number",min:"0",max:"100",step:"0.1",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[b,r(o).probability,void 0,{number:!0}]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"stock",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Stock ",-1)),m(e("input",{id:"stock","onUpdate:modelValue":t[3]||(t[3]=s=>r(o).stock=s),type:"number",min:"0",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[b,r(o).stock,void 0,{number:!0}]])])]),e("div",Ae,[m(e("input",{id:"isActive","onUpdate:modelValue":t[4]||(t[4]=s=>r(o).isActive=s),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[$,r(o).isActive]]),t[19]||(t[19]=e("label",{for:"isActive",class:"ml-2 block text-sm text-gray-900 dark:text-white"}," Premio activo ",-1))]),e("div",Pe,[e("button",{type:"submit",disabled:r(p),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:col-start-2 sm:text-sm disabled:opacity-50"},[r(p)?(l(),d("span",Ee,[t[20]||(t[20]=e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),h(" "+a(r(n)?"Actualizando...":"Creando..."),1)])):(l(),d("span",ze,a(r(n)?"Actualizar":"Crear"),1))],8,Me),e("button",{type:"button",onClick:v,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:col-start-1 sm:text-sm"}," Cancelar ")])],32)])])])])):w("",!0)]))}};export{Be as default};
