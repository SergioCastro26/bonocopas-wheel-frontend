import{x as p,r as o,A as n,O as u,k as l}from"./DF66RuPJ.js";const f=()=>{const{$api:t}=p(),e=o(null),i=n(()=>!!e.value),c=n(()=>e.value?.role==="admin"),s=o(!1),g=async r=>{try{s.value=!0;const a=await t.post("/auth/login",{email:r},{withCredentials:!0});return e.value=a.data.user,{success:!0,user:a.data.user}}catch(a){return console.error("Login error:",a),{success:!1,error:a.response?.data?.message||"Login failed"}}finally{s.value=!1}},d=async()=>{try{await t.post("/auth/logout",{},{withCredentials:!0}),e.value=null,await l("/login")}catch(r){console.error("Logout error:",r),e.value=null,await l("/login")}},h=async()=>{try{const r=await t.get("/auth/me",{withCredentials:!0});return e.value=r.data.user,!0}catch{return e.value=null,!1}};return{user:u(e),isLoggedIn:i,isAdmin:c,isLoading:u(s),login:g,logout:d,checkAuth:h}};export{f as u};
